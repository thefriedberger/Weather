<!doctype html>
<html>
<head>
	<title>Weather</title>
<style>
.wrapper {
	height:250px;
	width:300px;
	position:absolute;
	top:50%;
	left:50%;
	transform:translate(-50%,-50%);
	color:white;
	font-family:calibri;
	font-size:30pt;
	perspective:1000px;
	user-select:none;
	cursor:pointer;
}
.card {
	height:100%;
	width:100%;
	position:absolute;
	perspective:600px;
	border-radius:5px;
	box-shadow:5px 5px 20px black;
	transition:1.5s all;
	transform-style:preserve-3d;
	transform:rotateX(0deg);
}
.noAnimation {
	animation:none;
}
@keyframes cardFlip {
	0% {  transform:rotateX(0); width:300px; left:0%;}
	100% { transform:rotateX(180deg); width:600px; left:-50%; box-shadow:5px -5px 20px black;}
}
.cardFlip {
	animation:cardFlip 1.5s forwards;
}
@keyframes reverseFlip {
	0% { transform:rotateX(180deg); width:600px; left:-50%; box-shadow:5px -5px 20px black;}
	100% {  transform:rotateX(-180); width:300px; left:0%;}
}
.reverseFlip {
	animation:reverseFlip 1.5s forwards;
}
.front {
	position:absolute;
	height:100%;
	width:100%;
	border-radius:5px;
	background-color:#435170;
	backface-visibility: hidden;
}
.back {
	position:relative;
	height:100%;
	width:100%;
	border-radius:5px;
	background-color:#435170;
	backface-visibility: hidden;
	transform:rotateX(180deg);
	z-index:100;
}
#location {
	left:0%;
	text-align:center;
	top:5%;
	position:absolute;
	width:100%;
}
.bar {
	height:20%;
	width:100%;
	position:absolute;
	transition:1s all;
	backface-visibility:hidden;
}
.banner {
	background-color:#566689;
	border-radius:5px 5px 0 0;
	z-index:10;
}
.dateBar {
	top:20%;
	//background-color:#efde58;
	z-index:9;
}
.tempBar {
	top:40%;
	//background-color:#5C65EE;
	z-index:8;
}
.windBar {
	top:60%;
	height:40%;
	//background-color:#5CEE9C;
	z-index:7;
	border-radius:0 0 5px 5px;
}
.banner:hover, .dateBar:hover, .tempBar:hover, .windBar:hover{
	box-shadow:0 0 10px black;
}
#date {
	text-align:center;
	position:relative;
	top:25%;
	font-size:20pt;
}
#temp {
	left:50%;
	position:absolute;
	transform:translate(-50%,0);
	padding:5px 5px 5px 10px;
}
/*
#temp:hover {
	box-shadow:inset 0 0 10px black;
	border-radius:5px;
	background-color:#5e719b;
}
*/
#wind {
	top:15%;
	left:50%;
	position:absolute;
	transform:translate(-50%,0);
	font-size:20pt;
	text-align:center;
}
#speed { 
	position:relative;
}
#speed::after {
	content:"mph";
	font-size:12pt;
}
#chill {
	position:relative;
}
#chill::before {
	content:"Feels like ";
}
.slot {
	height:95%;
	width:19%;
	position:absolute;
	top:2.5%;
	box-shadow:inset 0 0 10px black;
	text-align:center;
	font-size:20pt;
	background-color:#566689;
	border-radius:5px;
}
#day1 { 
	left:0.5%;
}
#day2 {
	left:20.5%;
}
#day3 {
	left:40.5%;
}
#day4 {
	left:60.5%;
}
#day5 {
	left:80.5%;
}
.high {
	top:5%;
	position:relative;
}
.low {
	top:10%;
	position:relative;
}
.high::before {
	content:"High ";
	font-size:16pt;
}
.low::before {
	content:"Low ";
	font-size:16pt;
}
.day {
	font-size:30pt;
}
.weather {
	top:20%;
	position:relative;
}
.img {
	height:50%;
	width:50%;
}
.partly {
	background-color:#d0d5dd;
	color:black;
}
.sunny {
	background-color:#efd45b;
	color:black;
}
.rainy {
	background-color:#688ecc;
}
.cloudy {
	background-color:#8a919b;
}
</style>
</head>
<body>
<div class="wrapper">
	<div class="card noAnimation" id="card">
		<div class="front">
		<span class="banner bar"><div id="location"></div></span>
			<span class="dateBar bar"><div id="date"></div></span>
			<span class="tempBar bar"><div id="temp"></div></span>
			<span class="windBar bar"><div id="wind">
				<div id="chill"></div>
				<div id="speed"></div>
			</div></span>
		</div>
		<div class="back">
			<div class="slot" id="day1">
				<div class="day"></div>
				<div class="high"></div>
				<div class="low"></div>
				<div class="weather"><img class="img"></img></div>
			</div>
			<div class="slot" id="day2">
				<div class="day"></div>
				<div class="high"></div>
				<div class="low"></div>
				<div class="weather"><img class="img"></img></div>
			</div>
			<div class="slot" id="day3">
				<div class="day"></div>
				<div class="high"></div>
				<div class="low"></div>
				<div class="weather"><img class="img"></img></div>
			</div>
			<div class="slot" id="day4">
				<div class="day"></div>
				<div class="high"></div>
				<div class="low"></div>
				<div class="weather"><img class="img"></img></div>
			</div>
			<div class="slot" id="day5">
				<div class="day"></div>
				<div class="high"></div>
				<div class="low"></div>
				<div class="weather"><img class="img"></img></div>
			</div>
		</div>
	</div>
</div>

<script>


var data;
var xhttp = new XMLHttpRequest();
xhttp.addEventListener("load", onLoad);
xhttp.open("GET", "https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20weather.forecast%20where%20woeid%20in%20%28select%20woeid%20from%20geo.places%281%29%20where%20text%3D%22New%20York%2C%20NY%22%29&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys");
xhttp.send(); 

function onLoad(e) {
	data = JSON.parse(xhttp.responseText);
	console.log(data);
	var channel = data.query.results.channel;
	
	var currentTemp = channel.item.condition.temp;
	var temp = document.getElementById("temp");
	temp.innerHTML = currentTemp + '째';
	
	var currentLocation = channel.location.city + ', ' + channel.location.region;
	var location = document.getElementById("location");
	location.innerHTML = currentLocation;
	
	var currentWindSpeed = channel.wind.speed;
	var windSpeed = document.getElementById("speed");
	windSpeed.innerHTML = currentWindSpeed;
	
	var currentWindChill = channel.wind.chill;
	var windChill = document.getElementById("chill");
	windChill.innerHTML = currentWindChill + '째';	
	
	var forecast = channel.item.forecast;
	
	//determines the day and makes it a full string
	//I should probably throw this in its own method, make it more modular
	var currentDay = forecast[0].day;
	switch(currentDay) {
		case "Mon":
			currentDay="Monday";
			break;
		case "Tue":
			currentDay="Tuesday";
			break;
		case "Wed":
			currentDay="Wednesday";
			break;
		case "Thu":
			currentDay="Thursday";
			break;
		case "Fri":
			currentDay="Friday";
			break;
		case "Sat":
			day="Saturday";
			break;
		case "Sun":
			currentDay="Sunday";
			break;
		}	
	var actualDate = channel.item.forecast[0].date;
	var date = document.getElementById("date");
	date.innerHTML = currentDay + ', ' + actualDate;
	
	//loop through the 5 day forecast, 
	//nothing updates here, but it should work if it did
	for (var i = 0; i < 5; i++) {
		//display date for forecasts
		var forecastDay = forecast[i].day;
		var day = document.getElementsByClassName("day");
		day[i].innerHTML += forecastDay;
		
		//determine which images to display for projected weather
		var img = document.getElementsByClassName("img");
		var currentWeather = forecast[i].text;
		var slot = document.getElementsByClassName("slot");
		if (currentWeather == "Partly Cloudy" || currentWeather == "Partly Sunny") {
			img[i].src = "images/partly_cloudy_black.png";
			slot[i].className = "slot partly";
		}else if (currentWeather =="Mostly Cloudy") {
			img[i].src = "images/cloudy.png";
			slot[i].className = "slot cloudy";
		}else if (currentWeather == "Rain") {
			img[i].src = "images/rainy.png";
			slot[i].className = "slot rainy";
		}else if (currentWeather == "Mostly Sunny") {
			img[i].src = "images/sunny_black.png";
			slot[i].className = "slot sunny";
		}else if (currentWeather == "Scattered Showers") {
			img[i].src = "images/scattered.png";
			slot[i].className = "slot rainy";
		}
		
		//get the high temperatures for each day, put them in
		var highTemp = forecast[i].high;
		var high = document.getElementsByClassName("high");
		high[i].innerHTML += highTemp + '째';
		
		//get the lows for each day, put them in
		var lowTemp = forecast[i].low;
		var low = document.getElementsByClassName("low");
		low[i].innerHTML += lowTemp + '째';
	}
}
//eventListener to flip the card
var card = document.getElementById("card");
card.addEventListener('click', flip);
function flip() {
	if (card.className == "card noAnimation") {
		card.className = "card cardFlip";
	} else {
		card.className = "card reverseFlip";
		setTimeout(function () {
			card.className = "card noAnimation";
		},1500);
	}
}
</script>
</body>
</html>